<div class="avatar" [ngStyle]="{width: size + 'px', height: size + 'px'}">

  <div class="circle-image" [ngStyle]="{background: isPlasma && !avatar && !(!name || name.toLowerCase() === 'anonym' || name.toLowerCase() === 'anonymous') ? '#302685' : 'transparent'}">

    <!-- Default avatar -->
    <svg xmlns="http://www.w3.org/2000/svg"
         *ngIf="!avatar && (!name || name.toLowerCase() === 'anonym' || name.toLowerCase() === 'anonymous')"
         width="160"
         height="160"
         viewBox="0 0 160 160"
         fill="none"
         version="1.1">
      <mask id="mask0" x="0" y="0" width="160" height="160">
        <circle cx="80" cy="80" r="80" fill="#C4C4C4" id="circle4"/>
      </mask>
      <defs id="defs37">
        <clipPath id="clipPath4590">
          <circle style="fill:none;fill-opacity:1;stroke:#000000;stroke-opacity:1;" id="circle4592" cx="80" cy="80" r="80"/>
        </clipPath>
      </defs>

      <circle style="fill:#f9f9f9;stroke:none;fill-opacity:1;" id="path3779" cx="-79.520607" cy="-79.793945" r="79.194962"
              transform="scale(-1)"/>
      <path style="fill:#bdbdbd;" id="path11"
            d="m 24,147.4 v 15.732 c 0,2.166 1.6425,3.868 3.7333,3.868 H 132.267 c 2.091,0 3.733,-1.702 3.733,-3.868 V 147.4 c 0,-14.082 -7.989,-26.384 -20.011,-31.877 l 7.317,-7.582 c 1.643,-1.702 2.912,-3.637 3.808,-5.803 0.896,-2.2439 1.419,-4.6425 1.419,-7.1959 0,-0.3093 -0.075,-0.696 -0.075,-1.083 C 126.517,92.621 117.034,83.7236 114.869,82.6404 L 80,75.8317 78.5814,75.5225 42.5922,83.8782 c -1.1944,0.6965 -9.856,9.1298 -11.0504,9.9037 0,0.387 -0.0747,0.7735 -0.0747,1.1604 0,2.5535 0.5227,5.0295 1.4185,7.2727 0.8959,2.089 2.165,4.101 3.8081,5.726 l 7.3171,7.582 C 31.9893,121.016 24,133.318 24,147.4 Z"
            clip-path="url(#clipPath4590)"/>
      <path style="fill:#ffffff;" id="path15"
            d="m 116.257,56.6594 c -7.728,-4.7142 -18.8611,4.5061 -23.4613,9.7055 0,0 -6.2102,-1.0398 -10.6953,-1.0403 -4.4852,-6e-4 -10.6955,0.3457 -10.6955,0.3457 C 62.6644,59.8932 44.8383,50.4188 38.973,58.045 c -5.8653,7.626 -0.6901,12.8256 -0.6901,12.8256 1.3801,5.2687 12.4208,9.7055 16.2159,11.0923 0,2.4261 -0.8485,6.3482 4.1402,26.6901 5.8655,23.917 13.8011,27.037 22.0814,31.196 4.4854,0.693 6.5907,2.662 14.1459,-5.199 9.6607,-10.052 7.5907,-24.957 8.2807,-27.037 0.559,-1.684 3.105,-17.6779 4.14,-27.0369 5.98,-5.5459 16.698,-19.2026 8.97,-23.9167 z"/>
      <path style="stroke:#000000;stroke-linecap:round;stroke-linejoin:round;" id="path17"
            d="m 60.8626,65.6714 c 1.1592,1.2324 3.13,4.6217 1.7389,8.319 m 3.9747,-3.9284 c -1.6561,-0.1541 -5.2167,-0.1849 -6.2104,0.9243 m 4.7199,-4.1595 c -1.4077,0.2311 -4.3224,0.8319 -4.7199,1.3865"/>
      <path style="fill:#0e0947;" id="path21"
            d="m 84.5138,92.7608 c 0,6.5089 6.6423,11.7852 14.8359,11.7852 8.1933,0 14.8363,-5.2763 14.8363,-11.7852 0,-6.5088 -6.643,-5.5466 -14.8363,-5.5466 -8.1936,0 -14.8359,-0.9622 -14.8359,5.5466 z"/>
      <path style="fill:#0e0947;" id="path23"
            d="m 47.9415,92.7584 c 0,6.5088 6.6423,11.7856 14.8359,11.7856 8.1936,0 14.8359,-5.2768 14.8359,-11.7856 0,-6.5088 -6.6423,-5.5467 -14.8359,-5.5467 -8.1936,0 -14.8359,-0.9621 -14.8359,5.5467 z"/>
      <path style="fill:#c4c4c4;" id="path27"
            d="m 86.9329,118.704 c -3.8642,-1.664 -7.3604,0 -9.3155,0.693 -7.4519,6.933 -2.7597,12.363 0,14.558 3.4505,1.271 9.0374,3.883 12.0736,1.387 3.7952,-3.12 2.0722,-14.558 -2.7581,-16.638 z"/>
      <path style="fill:#f2f2f2;" id="path29"
            d="m 31.5514,93.7813 c 11.7975,-7.5821 29.3441,-12.1471 48.4587,-12.1471 19.413,0 36.7359,4.6419 48.4589,12.2248 -0.299,-4.1783 -1.792,-8.124 -4.555,-11.2188 L 95.2419,49.6543 C 91.3594,45.1667 85.6849,43 80.0101,43 74.3353,43 68.6605,45.1667 64.7782,49.6543 L 36.106,82.64 c -2.6879,3.095 -4.2562,6.9635 -4.5546,11.1413 z"/>
    </svg>

    <!-- Image -->
    <img *ngIf="avatar" [src]="avatar">

    <!-- Initials -->
    <svg width="160"
         height="160"
         viewBox="0 0 160 160"
         xmlns="http://www.w3.org/2000/svg"
         *ngIf="!avatar && name && (name.toLowerCase() !== 'anonym' || name.toLowerCase() !== 'anonymous')">
      <text x="80" y="102" text-anchor="middle" font-size="56px" [attr.fill]="isPlasma ? '#FFFFFF' : '#0E0947'">
        {{ getInitial() }}
      </text>
    </svg>

  </div>

  <!-- Plasma marker -->
  <div class="marker" *ngIf="isPlasma">
    <svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" style="fill:none;"
         version="1.1" viewBox="0 0 24 24" height="24" width="24">
      <defs>
        <linearGradient id="paint0_linear" x1="-2.56841e-08" y1="2.55319" x2="5" y2="2.55319">
          <stop stop-color="#FE493D"/>
          <stop offset="1" stop-color="#FC2C60"/>
        </linearGradient>
      </defs>
      <g transform="translate(-5,-5)" id="g3757">
        <circle cx="17" cy="17" r="12" id="circle2" style="fill:#ffffff;"/>
        <path style="clip-rule:evenodd;fill:#0e0947;fill-rule:evenodd;"
              d="m 18.234562,17.329611 c 0,1.33689 0.58129,2.54167 1.91199,2.54167 1.285,0 1.88152,-1.13883 1.88152,-2.54167 0,-1.40305 -0.59652,-2.52545 -1.88152,-2.52545 -1.3307,0 -1.91199,1.18835 -1.91199,2.52545 z m 0,-4.242238 v 0.776008 h 0.39774 c 0.42821,-0.577739 1.10127,-0.9905 2.20254,-0.9905 2.08049,0 3.33465,1.8982 3.33465,4.45673 0,2.5914 -1.26939,4.4563 -3.33465,4.4563 -1.08584,0 -1.71302,-0.3959 -2.12599,-0.99008 h -0.39775 v 4.07705 h -2.14161 V 13.087373 Z"
              id="path2"/>
        <circle fill="url(#paint0_linear)" cx="11.813559" cy="11.81356" r="2.5" id="circle2-4"/>
      </g>
    </svg>
  </div>

</div>
